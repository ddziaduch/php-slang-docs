<!DOCTYPE html>
<!--[if lt IE 7]>       <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>          <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>          <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <title>Fast Introduction To FP In PHP - PhpSlang</title>
    <meta name="description" content="Functional PHP the right way" />
    <meta name="author" content="Witold Adamus">
    <meta charset="UTF-8">
    <link rel="icon" href="../themes/daux/img/favicon-blue.png" type="image/x-icon">
    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700&subset=latin,cyrillic-ext,cyrillic' rel='stylesheet' type='text/css'>
    <!-- CSS -->
    <link href='../themes/daux/css/theme-blue.min.css' rel='stylesheet' type='text/css'>
            <!-- Tipue Search -->
        <link href="../tipuesearch/tipuesearch.css" rel="stylesheet">
    
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body class="">
    
<header class="Navbar hidden-print">
    <a class="Navbar__brand" href="../index.html">PhpSlang</a>

    <div class="Search">
        <svg class="Search__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451 451"><path d="M447.05 428l-109.6-109.6c29.4-33.8 47.2-77.9 47.2-126.1C384.65 86.2 298.35 0 192.35 0 86.25 0 .05 86.3.05 192.3s86.3 192.3 192.3 192.3c48.2 0 92.3-17.8 126.1-47.2L428.05 447c2.6 2.6 6.1 4 9.5 4s6.9-1.3 9.5-4c5.2-5.2 5.2-13.8 0-19zM26.95 192.3c0-91.2 74.2-165.3 165.3-165.3 91.2 0 165.3 74.2 165.3 165.3s-74.1 165.4-165.3 165.4c-91.1 0-165.3-74.2-165.3-165.4z"/></svg>
        <input type="search" id="tipue_search_input" class="Search__field" placeholder="Search..." autocomplete="on" results=25 autosave=text_search>
    </div>
</header>
<div class="Columns content">
    <aside class="Columns__left Collapsible">
        <div class="Collapsible__container">
            <button type="button" class="Button Collapsible__trigger">
                <span class="Collapsible__trigger--bar"></span>
                <span class="Collapsible__trigger--bar"></span>
                <span class="Collapsible__trigger--bar"></span>
            </button>
        </div>

        <div class="Collapsible__content">
            <!-- Navigation -->
            <ul class='Nav'><li class='Nav__item Nav__item--open has-children'><a href="../Introduction/Thinking_Functional.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Introduction</a><ul class='Nav'><li class='Nav__item '><a href="../Introduction/Thinking_Functional.html">Thinking Functional</a></li><li class='Nav__item Nav__item--active'><a href="../Introduction/Fast_Introduction_To_FP_In_PHP.html">Fast Introduction To FP In PHP</a></li><li class='Nav__item '><a href="../Introduction/Dont_be_afraid_of_monads.html">Dont be afraid of monads</a></li><li class='Nav__item '><a href="../Introduction/FAQ.html">FAQ</a></li></ul></li><li class='Nav__item  has-children'><a href="../Usage/Essentials/Copy_Trait.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Usage</a><ul class='Nav'><li class='Nav__item  has-children'><a href="../Usage/Essentials/Copy_Trait.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Essentials</a><ul class='Nav'><li class='Nav__item '><a href="../Usage/Essentials/Copy_Trait.html">Copy Trait</a></li><li class='Nav__item '><a href="../Usage/Essentials/Option.html">Option</a></li><li class='Nav__item '><a href="../Usage/Essentials/Either.html">Either</a></li><li class='Nav__item '><a href="../Usage/Essentials/Try.html">Try</a></li><li class='Nav__item '><a href="../Usage/Essentials/Future.html">Future</a></li></ul></li><li class='Nav__item '><a href="../Usage/Pattern_Matching.html">Pattern Matching</a></li><li class='Nav__item '><a href="../Usage/Extractors.html">Extractors</a></li><li class='Nav__item  has-children'><a href="../Usage/Immutable_Data_Structures/Overview.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Immutable Data Structures</a><ul class='Nav'><li class='Nav__item '><a href="../Usage/Immutable_Data_Structures/Overview.html">Overview</a></li><li class='Nav__item '><a href="../Usage/Immutable_Data_Structures/List.html">List</a></li><li class='Nav__item '><a href="../Usage/Immutable_Data_Structures/Set.html">Set</a></li><li class='Nav__item '><a href="../Usage/Immutable_Data_Structures/HashMap.html">HashMap</a></li><li class='Nav__item '><a href="../Usage/Immutable_Data_Structures/Parallel_Collections.html">Parallel Collections</a></li><li class='Nav__item '><a href="../Usage/Immutable_Data_Structures/Basic_Examples.html">Basic Examples</a></li><li class='Nav__item '><a href="../Usage/Immutable_Data_Structures/More_Examples.html">More Examples</a></li></ul></li><li class='Nav__item '><a href="../Usage/Memoization.html">Memoization</a></li><li class='Nav__item '><a href="../Usage/Trampolines.html">Trampolines</a></li></ul></li><li class='Nav__item  has-children'><a href="../Good_Practices/Common_Mistakes.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Good Practices</a><ul class='Nav'><li class='Nav__item '><a href="../Good_Practices/Common_Mistakes.html">Common Mistakes</a></li><li class='Nav__item  has-children'><a href="../Good_Practices/Tips_and_tricks/Pipelineing.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Tips and tricks</a><ul class='Nav'><li class='Nav__item '><a href="../Good_Practices/Tips_and_tricks/Pipelineing.html">Pipelineing</a></li></ul></li></ul></li><li class='Nav__item  has-children'><a href="../Additional_Articles/Top_10_Sins_of_PHP.html" class="folder"><i class="Nav__arrow">&nbsp;</i>Additional Articles</a><ul class='Nav'><li class='Nav__item '><a href="../Additional_Articles/Top_10_Sins_of_PHP.html">Top 10 Sins of PHP</a></li></ul></li><li class='Nav__item  has-children'><a href="../General/Roadmap.html" class="folder"><i class="Nav__arrow">&nbsp;</i>General</a><ul class='Nav'><li class='Nav__item '><a href="../General/Roadmap.html">Roadmap</a></li><li class='Nav__item '><a href="../General/Other_Resources.html">Other Resources</a></li><li class='Nav__item '><a href="../General/License.html">License</a></li></ul></li></ul>

            <div class="Links">
                                    <hr/>
                                            <a href="https://github.com/php-slang/php-slang" target="_blank">GitHub Repo</a>
                        <br />
                                            <a href="http://xsolve.pl" target="_blank">Supported by xsolve</a>
                        <br />
                                            <a href="http://wit3k.pl" target="_blank">Made by Witold Adamus</a>
                        <br />
                                    
                
                                    <hr/>
                    <div class="Twitter">
                                                    <iframe allowtransparency="true" frameborder="0" scrolling="no" style="width:162px; height:20px;" src="https://platform.twitter.com/widgets/follow_button.html?screen_name=_phpslang&amp;show_count=false"></iframe>
                            <br />
                            <br />
                                                    <iframe allowtransparency="true" frameborder="0" scrolling="no" style="width:162px; height:20px;" src="https://platform.twitter.com/widgets/follow_button.html?screen_name=xsolve&amp;show_count=false"></iframe>
                            <br />
                            <br />
                                            </div>
                            </div>
        </div>
    </aside>
    <div class="Columns__right ">
        <div class="Columns__right__content">
            <div class="doc_content">
                <article class="Page">

    <div class="Page__header">
        <h1><a href="../Introduction/Thinking_Functional.html">Introduction</a> <svg class="Page__header--separator" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 477.175 477.175"><path d="M360.73 229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1 0s-5.3 13.8 0 19.1l215.5 215.5-215.5 215.5c-5.3 5.3-5.3 13.8 0 19.1 2.6 2.6 6.1 4 9.5 4 3.4 0 6.9-1.3 9.5-4l225.1-225.1c5.3-5.2 5.3-13.8.1-19z"/></svg> <a href="../Introduction/Fast_Introduction_To_FP_In_PHP.html">Fast Introduction To FP In PHP</a></h1>
                <span style="float: left; font-size: 10px; color: gray;">
            Tuesday, March 21, 2017 1:57 AM        </span>
                        <span style="float: right; font-size: 10px; color: gray;">
            <a href="https://github.com/php-slang/php-slang-docs/blob/gh-pages/docs/00_Introduction/02_Fast_Introduction_To_FP_In_PHP.md" target="_blank">Edit on GitHub</a>
        </span>
            </div>


    <div class="s-content">
        <h2 id="page_What_this_article_is_about_and_what_isnt">What this article is about and what is'nt?</h2>
<p>This part of PhpSlang documentation covers basic syntax constructs given by PHP that are crutial in terms of functional proogramming.</p>
<p>This article also display what is possible in PHP with functionall approach and what is'nt.</p>
<p>This is not a tutorial on how to program functionally and/or with a PhpSlang library.</p>
<h2 id="page_Minimal_survival_resources">Minimal survival resources</h2>
<p><em>Functional programming is a style. It works in any programming language.</em> Brian Beckman</p>
<p>This is a great quote, especially in case of PHP which usually isn't a first thought when you talk about FP.</p>
<p>Well this quote isn't true for every programming language. If you want to program functionally you need one crucial feature in a language: <strong>Function is a fisrt class citizen</strong>.</p>
<p>What does it mean?</p>
<ul>
<li>can be stored in variables and data structures</li>
<li>can be passed as a parameter to a subroutine</li>
<li>can be returned as the result of a subroutine</li>
<li>can be constructed at runtime</li>
<li>has intrinsic identity (independent of any given name)</li>
</ul>
<p>In other words: you can assign function to &quot;variable&quot;, return customized function from another function and take as an argument using standard language constructs with no need to rely on reflection.</p>
<p>Does PHP fulfill all listed requirements? - YES... well almost.</p>
<p>To have a better picture, take a look at <a href="https://en.wikipedia.org/wiki/First-class_function" class="external">this table at Wikipedia</a></p>
<p>We see that two bits of a puzzle are missing. We'll go back to it later in this article.</p>
<h2 id="page_Function_definition">Function definition</h2>
<p>Just to remind. The simplest example as it only can be:</p>
<pre><code class="language-php">public foo($a) {
  return $a * 2;
}
</code></pre>
<p>This function returns parameter $a multiplied by 2.</p>
<p>PHP gives us ability to typehint parameters taken by method and it's result so in this case it's safer (and recommended) to explicitly describe types:</p>
<pre><code class="language-php">public foo(int $a): int {
  return $a * 2;
}
</code></pre>
<p>In PHP functions can be defined as part of classes - in that case we call them <em>methods</em>:</p>
<pre><code class="language-php">class Bar {
  public function foo(int $a): int {
    return $a * 2;
  }
}
</code></pre>
<p>Things above are nobrainers. Every PHP developer arount the world uses those contructs everyday. But now it get's interesting.</p>
<h2 id="page_Function_as_a_parameter">Function as a parameter</h2>
<p>Let's consider a following function (regartheless if it's just a dangling function or class method).</p>
<pre><code class="language-php">function doSomethingFunnyWith(string $originalTxt, int $times, Closure $transformation): string {
  $accumulator = '';
  for($i=0; $i &lt; $times ;$i++) {
    $accumulator .= $transformation($originalTxt);
  }
  return $accumulator;
}
</code></pre>
<p>This function:</p>
<ul>
<li>has no side effects</li>
<li>contains variable <em>$accumulator</em> which is a bad practice in perspective of FP (and also when you thing about scalability), but we'll cover this topic later</li>
<li>take 3 parameters:
<ul>
<li>some string to play with</li>
<li>numeric value to indicate how many times we want to repeat transofmed text</li>
<li>Closure (method) which is then used to transform $originalTxt</li>
</ul>
</li>
</ul>
<p>When function takes another function as an argument we call it a <strong>higher-order function</strong>.</p>
<p>Look closer at this part: <code>$transformation($originalTxt)</code>
Function parameter named: <code>$transformation</code> is a function so we use it as a function, simply adding brackets and passing inside them function parameter(s) as we would do for every other function.</p>
<p>How to use such function? String and int parameters don't require explanation but Closure needs some more attention because we rules and possibilities vary between different ways you use such function.</p>
<h3 id="page_Using_higher_order_functions">Using higher order functions</h3>
<p>PHP gives you a way to define function just in a place you want to use it. Such functions are called <strong>anonymous functions</strong>. You don't give a name to such function, there is no way to reuse it in other parts of a code but it's also a very comfortable and popular way to define functions (and with FP approach you're going to write a lot of them). So if you'd like to print on screen &quot;D_O_OD_O_OD_O_O&quot; you could execute <em>doSomethingFunnyWith</em> in a following way:</p>
<pre><code class="language-php">echo doSomethingFunnyWith(
  &quot;DOO&quot;,
  3,
  function(string $inp): string {
    return implode('_', str_split($inp));
  }
);
</code></pre>
<p>But now let's consider a situation when you actually would like to define this function once and have an ability to reuse it.</p>
<pre><code class="language-php">function underscoresEverywhere(string $inp): string {
  return implode('_', str_split($inp));
}
</code></pre>
<p>and now let's use it:</p>
<pre><code class="language-php">echo doSomethingFunnyWith(
  &quot;DOO&quot;,
  3,
  underscoresEverywhere
);
</code></pre>
<p>hmm...</p>
<pre><code>PHP Notice:  Use of undefined constant underscoresEverywhere - assumed 'underscoresEverywhere' in ... on line ...
</code></pre>
<p>Well maybe:</p>
<pre><code class="language-php">echo doSomethingFunnyWith(
  &quot;DOO&quot;,
  3,
  underscoresEverywhere()
);
</code></pre>
<p>aahhh, again error:</p>
<pre><code>PHP Fatal error:  Uncaught TypeError: Argument 1 passed to underscoresEverywhere() must be of the type string, none given, called in ...
</code></pre>
<p>Quite frustrating huh?</p>
<p>Well PHP isn't a perfect language for FP. When you want to: name a function AND be able to pass it as a parameter you have to assign it to a &quot;variable&quot; (the word variable is written with quotes because in FP you should rather think in terms of immutable values rather than variables).</p>
<p>Do you remember <a href="https://en.wikipedia.org/wiki/First-class_function" class="external">wikipedia listing</a>? Well - this is the reason why section <strong>Nested functions</strong> -&gt; <strong>Named</strong> is marked as <em>yellow -&gt; Using anonymous</em>.</p>
<p>So what is a propper way to use such function?</p>
<h4 id="page_Version_1a">Version 1a</h4>
<p>As said previously - assign function to &quot;variable&quot;:</p>
<pre><code class="language-php">$underscoresEverywhere = function (string $inp): string {
  return implode('_', str_split($inp));
};//don't forget about semicolon :)

echo doSomethingFunnyWith(
  &quot;DOO&quot;,
  3,
  $underscoresEverywhere
);

</code></pre>
<h4 id="page_Version_1b">Version 1b</h4>
<p>Same approach but inside a class:</p>
<pre><code class="language-php">class Foo {
  /**
   * @var Closure
   */
  $underscoresEverywhere;

  public function __construct() {
    $this-&gt;underscoresEverywhere = function (string $inp): string {
      return implode('_', str_split($inp));
    };
    //BAD NEWS - passing methods inside class sucks too. If you want to make method &quot;passable&quot;, you
    // have to assign it to class field.
  }

  private function doSomethingFunnyWith(string $originalTxt, int $times, Closure $transformation): string {
    $accumulator = '';
    for($i=0; $i &lt; $times ;$i++) {
      $accumulator .= $transformation($originalTxt);
    }
    return $accumulator;
  }

  public function testRide(): string {
    return $this-&gt;doSomethingFunnyWith(
      &quot;DOO&quot;,
      3,
      $this-&gt;underscoresEverywhere
    );
  }
}

echo (new Foo())-&gt;testRide(); //remember about additional brackets around constructor usage, so you can chain method calls with no need to use variables
</code></pre>
<h4 id="page_Version_2a">Version 2a</h4>
<p>You can also wrap every named function/method with the anonymous function:</p>
<pre><code class="language-php">function underscoresEverywhere(string $inp): string {
  return implode('_', str_split($inp));
}

echo doSomethingFunnyWith(
  &quot;DOO&quot;,
  3,
  function(string $inp): string {
    return underscoresEverywhere($inp);
  }
);

</code></pre>
<h4 id="page_Version_2b">Version 2b</h4>
<p>Same as version 2a but for a class definition:</p>
<pre><code class="language-php">class Foo {
  private function underscoresEverywhere(string $inp): string {
    return implode('_', str_split($inp));
  }

  private function doSomethingFunnyWith(string $originalTxt, int $times, Closure $transformation): string {
    $accumulator = '';
    for($i=0; $i &lt; $times ;$i++) {
      $accumulator .= $transformation($originalTxt);
    }
    return $accumulator;
  }

  public function testRide(): string {
    return $this-&gt;doSomethingFunnyWith(
      &quot;DOO&quot;,
      3,
      function(string $inp): string {
        return $this-&gt;underscoresEverywhere($inp);
      }
    );
  }
}

echo (new Foo())-&gt;testRide();
</code></pre>
<p>It may seem like this notation is quite verbosive, but it's actually a most popular and comfortable way use higher order functions in PHP.
Well - <a href="../Additional_Articles/Top_10_Sins_of_PHP.html">PHP syntax does not spoil</a>.</p>
<h2 id="page_Closure_vs_Callable">\Closure vs \Callable</h2>
<p>One more way to implement the example we iterate with, is to use <code>Callable</code> type for <code>doSomethingFunnyWith</code> definition instead of <code>Closure</code>.</p>
<pre><code class="language-php">class Foo {
  private function underscoresEverywhere(string $inp): string {
    return implode('_', str_split($inp));
  }

  private function doSomethingFunnyWith(string $originalTxt, int $times, Callable $transformation): string {
    $accumulator = '';
    for($i=0; $i &lt; $times ;$i++) {
      $accumulator .= $transformation($originalTxt);
    }
    return $accumulator;
  }

  public function testRide(): string {
    return $this-&gt;doSomethingFunnyWith(
      &quot;DOO&quot;,
      3,
      [$this, 'underscoresEverywhere'] //now you can pass a method name with a string
    );
  }
}

echo (new Foo())-&gt;testRide();
</code></pre>
<p><code>Callable</code> may seem like a default choice but it's actually more bug prone variant. <code>Callable</code> gives you some more flexibility, but with great power comes a great responsibility. Let's consider a following code example.</p>
<pre><code class="language-php">class Foo {
  private youDontWantToRunThisMethod(): void {
    launchNuclearMissiles();
    dropDatabase();
  }

  private function underscoresEverywhere(string $inp): string {
    return implode('_', str_split($inp));
  }

  private function doSomethingFunnyWith(string $originalTxt, int $times, Callable $transformation): string {
    $accumulator = '';
    for($i=0; $i &lt; $times ;$i++) {
      $accumulator .= $transformation($originalTxt);
    }
    return $accumulator;
  }

  public function testRide(string $methodName): string {
    return $this-&gt;doSomethingFunnyWith(
      &quot;DOO&quot;,
      3,
      [$this, $methodName]
    );
  }
}

$userInput = 'underscoresEverywhere';
echo (new Foo())-&gt;testRide($userInput);

$userInput = 'youDontWantToRunThisMethod';
echo (new Foo())-&gt;testRide($userInput);
</code></pre>
<p>:)</p>
<p>As you see - using strings to indicate which methods you want to use is a bad idea. Your IDE will have problems with proper types resolving, so you won't have code completions, so your live standard will drop and then everybody dies. Same rules apply to <a href="http://php.net/manual/en/function.call-user-func.php" class="external">call_user_func</a> method usage - you should avoid it at all costs as long as it's possible.</p>
<p>For more info about differences between <code>Closure</code> and <code>Callable</code> please reffer to PHP official documentation <a href="http://php.net/manual/en/language.types.callable.php" class="external">\Callable</a> &amp; <a href="http://php.net/manual/en/class.closure.php" class="external">\Closure</a></p>
<h2 id="page_Function_as_a_result">Function as a result</h2>
<p>One more part that needs our attention is returning new functions from functions. Such mechanism is called <strong>currying</strong>.
Let's rewrite again our method presenting &quot;D_O_OD_O_OD_O_O&quot; string. Let's say you'd like to customize letter used between characters, but the rest of a method should stay the same. Obvious and easiest method would be to just add another <code>string</code> parameter, but let's try another way.</p>
<pre><code class="language-php">class Foo {
  //that is a place where method underscoresEverywhere was located
  private function curriedStringFiller(string $glueWith): Closure {
    return function(string $inp) use ($glueWith): string {
      return implode($glueWith, str_split($inp));
    };
  }

  private function doSomethingFunnyWith(string $originalTxt, int $times, Closure $transformation): string {
    $accumulator = '';
    for($i=0; $i &lt; $times ;$i++) {
      $accumulator .= $transformation($originalTxt);
    }
    return $accumulator;
  }

  public function testRide(): string {
    return $this-&gt;doSomethingFunnyWith(&quot;DOO&quot;, 3, $this-&gt;curriedStringFiller('+'));
  }
}

echo (new Foo())-&gt;testRide();
</code></pre>
<p>This time you are going to end up with: &quot;D+O+OD+O+OD+O+O&quot;</p>
<p>What happens in this example? Method <code>curriedStringFiller</code> returns another methos - it's anonymous function created at runtime.
You can see one more PHP syntax keyword used which is <code>use</code>. You have to use such syntax to be able to use &quot;variables&quot; from outside scope inside your new anonymous methods (without <code>use ($glueWith)</code> you couldn't see content of this &quot;variable&quot;).</p>
<p>Let's also look closer at lines:</p>
<pre><code class="language-php">return $this-&gt;doSomethingFunnyWith(&quot;DOO&quot;, 3, $this-&gt;curriedStringFiller('+'));
</code></pre>
<p>Remember that <code>$this-&gt;curriedStringFiller('+')</code> actually does nothing with a string passed to <code>doSomethingFunnyWith</code>. It only returns a new function which is passed to <code>doSomethingFunnyWith</code> and then method <code>doSomethingFunnyWith</code> in it's internal implementation uses a resulting method to transform a <code>string</code> given as a first parameter.</p>
<p>What we did in presented example could be written in a much shorter way if we used languages like JavaScript, Scala or Haskell. Those languages have build in mechanisms for currying and/or <em>partially applied functions</em>* (every function can be used as curried - when you don't provide all required parameters to function, a new one is created and this new function requires only missing parameters from original one).</p>
<p>Again - refer to <a href="https://en.wikipedia.org/wiki/First-class_function" class="external">Wikipedia listing</a> for more info. This is a part where PHP lacks some basic functionality. There is just no such thing as <strong>Partial application</strong> in PHP. You may like to see what you loose that exists for <a href="https://wiki.haskell.org/Partial_application" class="external">Haskell</a>, JavaScript <a href="https://lostechies.com/derickbailey/2012/07/20/partially-applied-functions-in-javascript/" class="external">1</a>, <a href="http://raganwald.com/2015/04/01/partial-application.html" class="external">2</a> or Scala <a href="http://docs.scala-lang.org/tutorials/tour/currying.html" class="external">1</a>, <a href="http://docs.scala-lang.org/cheatsheets/" class="external">2</a>. But there is also a good news! You can live without this feature. When you'd use a partially applied function, you can create a new function instead (as presented in the example above, where we &quot;manually&quot; created a new function).</p>
<h2 id="page_One_more_last_step">One more last step</h2>
<p>Aa it was mentioned in introduction - this article covers PHP syntax elements required to be able to develop in a functional style, but may not display good practicies. Functional programming crutial principle is immutability. At the same time you could see that in code example we use <code>for</code> statement with variables like <code>$i</code> and <code>$accumulator</code>. Let's add some final touches to the last version of our class to make it purely functional.</p>
<pre><code class="language-php">  private function doSomethingFunnyWith(string $originalTxt, int $times, Closure $transformation): string {
    return array_reduce(range(1, $times), function(string $accumulator, int $item) use ($transformation, $originalTxt): string {
      return $accumulator.$transformation($originalTxt);
    }, '');
  }
</code></pre>
<p>What happened to doSomethingFunnyWith method?
We used <code>range</code> method to generate list of <code>$times</code> elements, and then we used <code>array_reduce</code> method to iterate over range and build a final string (ignoring an <code>$item</code> variable, because we don't actually need it).</p>
<p>With PhpSlang a final form of this class may look like this:</p>
<pre><code class="language-php">use PhpSlang\Collection\ListCollection;

class Foo {
  private function curriedStringFiller(string $glueWith): Closure {
    return function(string $inp) use ($glueWith): string {
      return implode($glueWith, str_split($inp));
    };
  }

  private function doSomethingFunnyWith(string $originalTxt, int $times, Closure $transformation): string {
    //voilà - functional, referentially transparent, readable, chainable, very little or no error risk
    return (new ListCollection(range(1, $times)))
      -&gt;fold('', function(string $accumulator, int $item) use ($transformation, $originalTxt): string {
        return $accumulator.$transformation($originalTxt);
      });
  }

  public function testRide(): string {
    return $this-&gt;doSomethingFunnyWith(&quot;DOO&quot;, 3, $this-&gt;curriedStringFiller('+'));
  }
}

echo (new Foo())-&gt;testRide();
</code></pre>
    </div>

        <nav>
        <ul class="Pager">
            <li class=Pager--prev><a href="../Introduction/Thinking_Functional.html">Previous</a></li>            <li class=Pager--next><a href="../Introduction/Dont_be_afraid_of_monads.html">Next</a></li>        </ul>
    </nav>
    </article>

            </div>
        </div>
    </div>
</div>

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-86414385-1', '');
    ga('send', 'pageview');
</script>

    <!-- jQuery -->
    <script src="../themes/daux/js/jquery-1.11.3.min.js"></script>

    <!-- hightlight.js -->
    <script src="../themes/daux/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- JS -->
    
    <script src="../themes/daux/js/daux.js"></script>

            <!-- Tipue Search -->
        <script type="text/javascript" src="../tipuesearch/tipuesearch.js"></script>

        <script>
            window.onunload = function(){}; // force $(document).ready to be called on back/forward navigation in firefox
            $(function() {
                tipuesearch({
                    'base_url': '../'
                });
            });
        </script>
    
</body>
</html>
